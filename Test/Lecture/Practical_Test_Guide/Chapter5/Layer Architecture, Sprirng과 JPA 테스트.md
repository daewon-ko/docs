# Spring과 JPA 테스트

### Layered Architecture

* Spring MVC에서 흔히 사용
* 3 Architecture Or 4 Architecture로 구성되나 기본적 골조는 Layer별로 관심사를 분리하는 것이 목적
  * Presentation Layer <-> Business Layer <-> PersistenceLayer <-> (Infrastructure Layer)



이전강의까지 이야기한 것이 '단위테스트'였다면, 모듈과 모듈 사이에 협력하여 결과를 도출하는 경우에, 
결과값이 어떻게 나올 지 어떻게 보장할 수 있는가? 



### 통합테스트

* 여러 모듈이 협력하는 기능을 통합적으로 검증하는 테스트
* 일반적으로 작은 범위의 단위 테스트만으로는 기능 전체의 신뢰성 보장 X
* 풍부한 단위 테스트 & 큰 기능 단위를 검증하는 통합테스트로 보통 테스트를 구성한다. 

---



### Spring/ JPA 훑어보기 & 기본 엔티티 설계

* 라이브러리 VS Framework
  * 라이브러리 -> 내 코드가 주체가 되어서 외부 기능(라이브러리)을 끌어와서 사용
  * 프레임 워크 -> 이미 존재하는 환경(프레임) 안에 내 코드가 들어가서 역할을 하는 것

### Spring

1. IOC

   특정 객체를 사용하고 싶을때, 객체의 생명주기의 관리를 제 3자에게 위임
   (IOC Container)

2. DI 

   제 3자가 객체를 주입해줄 때, 인터페이스와 같은 약결합 형태로 객체를 주입시키는 것

3. AOP

​	비즈니스 로직과 관련없는 부분 -> Aspect라고 부르고 다른 모듈로 분리. 
​	Proxy를 통해 사용



### JPA / ORM

ORM의 한 종류 -> JPA

1. 객체 지향 패러다임과 관계형 DB 패러다임의 불일치
2. ORM이전에는 객체 데이터를 DB에 하나씩 필드별로 분리하여 맵핑하여 CRUD 수행
3. 개발자 입장에서는 단순작업을 줄이고 비즈니스 로직에 집중 가능



JPA

1. Java 진영의 ORM 표준, 즉 인터페이스이고 여러 구현체가 있지만 보통 Hibernate를 많이 사용

2. 반복적인 CRUD SQL 자동 작성 및 부가 기능 실행

3. 쿼리를 직접 작성하진 않지만, 어떻게 쿼리가 만들어지고 실행되는지는 이해가 필요

4. Spring 진영에서는 JPA를 한 번 더 추상화 한 Spring Data JPA 사용
5. QueryDSL과 조합하여 많이 사용(타입체크, 동적쿼리)





